            using var db = new ShahrsaziEntities();
            var ds = new DataSet();
            //var context = ((IObjectContextAdapter)db).ObjectContext;
            db.Database.Connection.Open();
            db.Database.CommandTimeout = 220;
            var command = (SqlCommand)db.Database.Connection.CreateCommand();
            command.CommandType = CommandType.StoredProcedure;
            command.CommandText = "GozareshCountParvande";
            command.Parameters.Add("@Mantaghe", Mantaghe);
            command.Parameters.Add("@Hoze", Hoze);
            command.Parameters.Add("@Blok", Blok);
            command.Parameters.Add("@Melk", Melk);
            command.Parameters.Add("@fromshop", fromshop);
            command.Parameters.Add("@toshop", toshop);
            command.Parameters.Add("@fromDate", fromDate);
            command.Parameters.Add("@toDate", toDate);
            command.Parameters.Add("@type", type);
            SqlDataAdapter daReport = new SqlDataAdapter((SqlCommand)command);
            daReport.SelectCommand.CommandTimeout = 999;
            daReport.Fill(ds);
            command.ExecuteReader();
            db.Database.Connection.Close();